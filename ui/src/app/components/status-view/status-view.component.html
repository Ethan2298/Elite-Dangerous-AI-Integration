<div class="status-container">
            <div class="tab-layout">
                <div class="tab-sidebar">
                    <button class="tab-button" [class.active]="selectedTab === INFORMATION_TAB" (click)="setActiveTab(INFORMATION_TAB)">
                        <mat-icon>info</mat-icon>
                        <span>Info</span>
                    </button>
                    <button class="tab-button" [class.active]="selectedTab === COMMANDER_TAB" (click)="setActiveTab(COMMANDER_TAB)">
                        <mat-icon>person</mat-icon>
                        <span>Commander</span>
                    </button>
                    <button class="tab-button" [class.active]="selectedTab === STATION_TAB"
                            *ngIf="isInStation()" (click)="setActiveTab(STATION_TAB)">
                        <mat-icon>store</mat-icon>
                        <span>Station</span>
                    </button>
                    <button class="tab-button" [class.active]="selectedTab === STORAGE_TAB" (click)="setActiveTab(STORAGE_TAB)">
                        <mat-icon>inventory_2</mat-icon>
                        <span>Storage</span>
                    </button>
                </div>

                <div class="tab-content">
                    <!-- Info Tab Content -->
                    <div *ngIf="selectedTab === INFORMATION_TAB" class="tab-pane">
                        <!-- Current Status Icons (fixed at upper right) -->
                        <div class="status-indicators-fixed">
                            <div class="active-status-icons">
                                <ng-container *ngFor="let flag of statusFlags">
                                    <div *ngIf="getCurrentStatusValue('flags', flag)" class="status-icon">
                                        <mat-icon matTooltip="{{ formatFlagName(flag) }}">{{ getIconForFlag(flag) }}</mat-icon>
                                    </div>
                                </ng-container>
                                <ng-container *ngFor="let flag of odysseyFlags">
                                    <div *ngIf="getCurrentStatusValue('flags2', flag)" class="status-icon">
                                        <mat-icon matTooltip="{{ formatFlagName(flag) }}">{{ getIconForOdysseyFlag(flag) }}</mat-icon>
                                    </div>
                                </ng-container>

                                <!-- Friends counter -->
                                <div class="friends-counter" (click)="toggleFriendsPanel()" *ngIf="getFriendsCount() > 0">
                                    <mat-icon>people</mat-icon>
                                    <span class="badge">{{ getFriendsCount() }}</span>
                                </div>

                                <!-- Colonisation Construction indicator -->
                                <div *ngIf="isColonisationActive(getProjection('ColonisationConstruction'))"
                                     class="colonisation-indicator"
                                     (click)="toggleColonisationPanel()">
                                    <mat-icon>construction</mat-icon>
                                    <span class="progress-text">{{ formatPercentage(getColonisationProgress()) }}</span>
                                </div>
                            </div>
                        </div>

                        <!-- Location & Nav info (minimalistic) -->
                        <div class="location-nav-container">
                            <div class="location-info">
                                <mat-icon>public</mat-icon>
                                <div class="location-details">
                                    <div class="system-name">{{ getLocationSystem() }}</div>
                                    <div *ngIf="getLocationDetail()" class="location-detail">
                                        <mat-icon class="small-icon">{{ getLocationDetailIcon() }}</mat-icon>
                                        <span>{{ getLocationDetail() }}</span>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="hasNavRoute()" class="nav-info" (click)="toggleNavDetails()">
                                <mat-icon>navigation</mat-icon>
                                <span>{{ getNavRouteInfo() }}</span>
                                <mat-icon class="expander">{{ showNavDetails ? 'expand_less' : 'expand_more' }}</mat-icon>
                            </div>
                        </div>

                        <!-- Nav Route Details -->
                        <div *ngIf="showNavDetails" class="nav-details">
                            <div class="nav-route-list">
                                <div *ngFor="let system of getNavRouteDetails(); let i = index" class="nav-route-item">
                                    <div class="nav-index">{{ i + 1 }}</div>
                                    <div class="nav-system">{{ system.StarSystem }}</div>
                                    <div class="nav-star-info" *ngIf="system.StarClass">
                                        <mat-icon class="star-icon" [ngClass]="getStarClassColor(system.StarClass)">
                                            {{ getStarTypeIcon(system.StarClass) }}
                                        </mat-icon>
                                        <span class="star-class">{{ system.StarClass }}</span>
                                    </div>
                                    <div class="nav-distance" *ngIf="system.StarPos && i > 0">
                                        {{ getJumpDistance(i) }} ly
                                    </div>
                                    <div class="star-scoopable" *ngIf="system.Scoopable !== undefined">
                                        <mat-icon class="fuel-icon" [ngClass]="system.Scoopable ? 'scoopable' : 'not-scoopable'">
                                            {{ system.Scoopable ? 'local_gas_station' : 'not_interested' }}
                                        </mat-icon>
                                        <span class="small-text">{{ system.Scoopable ? 'Scoopable' : 'Not scoopable' }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Context-dependent content based on active mode -->
                        <div *ngIf="getActiveMode() === 'humanoid'" class="context-content character-sheet">
                            <!-- TOP SECTION - Character Identity -->
                            <div class="character-header">
                                <div class="character-name">
                                    <h2>{{ getSuitName() }}</h2>
                                    <div class="character-subtitle">{{ getSuitLoadoutName() }}</div>
                                </div>
                                <div class="character-class">
                                    <div class="class-circle">
                                        <div class="circle-value">{{getSuitClass()}}</div>
                                    </div>
                                    <div class="class-label">CLASS</div>
                                </div>
                            </div>

                            <!-- CHARACTER SHEET MAIN SECTION -->
                            <div class="character-sheet-body">
                                <!-- LEFT COLUMN - Attributes/Abilities -->
                                <div class="sheet-column attributes-column">
                                    <div class="stat-block suit-mods">
                                        <h3 class="stat-header">SUIT MODIFICATIONS</h3>
                                        <div class="mod-list">
                                            <div *ngFor="let mod of getSuitMods()" class="mod-item">
                                                <div class="mod-icon">
                                                    <mat-icon>{{ getSuitModIcon(mod) }}</mat-icon>
                                                </div>
                                                <div class="mod-name">{{ formatModName(mod) }}</div>
                                            </div>
                                            <div *ngIf="!getSuitMods().length" class="empty-state">No modifications</div>
                                        </div>
                                    </div>

                                    <div class="proficiencies-block">
                                        <h3 class="stat-header">PROFICIENCIES</h3>
                                        <div class="proficiency-item">
                                            <span class="proficiency-name">Combat</span>
                                            <div class="proficiency-value">Advanced</div>
                                        </div>
                                        <div class="proficiency-item">
                                            <span class="proficiency-name">Engineering</span>
                                            <div class="proficiency-value">Basic</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- MIDDLE COLUMN - Combat Stats -->
                                <div class="sheet-column stats-column">
                                    <div class="combat-stats">
                                        <div class="combat-stat-item">
                                            <div class="combat-stat-circle">
                                                <span class="combat-stat-value">100%</span>
                                            </div>
                                            <div class="combat-stat-label">HEALTH</div>
                                        </div>

                                        <div class="combat-stat-item">
                                            <div class="combat-stat-circle">
                                                <span class="combat-stat-value">100%</span>
                                            </div>
                                            <div class="combat-stat-label">SHIELDS</div>
                                        </div>

                                        <div class="combat-stat-item">
                                            <div class="combat-stat-circle">
                                                <span class="combat-stat-value">100%</span>
                                            </div>
                                            <div class="combat-stat-label">OXYGEN</div>
                                        </div>

                                        <div class="combat-stat-item">
                                            <div class="combat-stat-circle">
                                                <span class="combat-stat-value">100%</span>
                                            </div>
                                            <div class="combat-stat-label">BATTERY</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- RIGHT COLUMN - Weapons/Equipment -->
                                <div class="sheet-column weapons-column">
                                    <h3 class="stat-header">ARMAMENTS</h3>
                                    <div class="weapons-list">
                                        <ng-container *ngFor="let weapon of getSuitWeapons()">
                                            <div class="weapon-card">
                                                <div class="weapon-header">
                                                    <div class="weapon-name">{{ weapon.ModuleName_Localised || weapon.ModuleName }}</div>
                                                    <div class="weapon-class">
                                                        <div class="class-bubble">{{ weapon.Class || '?' }}</div>
                                                    </div>
                                                </div>
                                                <div class="weapon-type">{{ getWeaponType(weapon) }}</div>
                                                <div class="weapon-slot">{{ formatWeaponSlot(weapon.SlotName) }}</div>
                                                <div class="weapon-mods">
                                                    <ng-container *ngIf="weapon.WeaponMods && weapon.WeaponMods.length">
                                                        <div *ngFor="let mod of weapon.WeaponMods" class="weapon-mod-tag">
                                                            {{ formatModName(mod) }}
                                                        </div>
                                                    </ng-container>
                                                    <div *ngIf="!weapon.WeaponMods || !weapon.WeaponMods.length" class="empty-state">
                                                        No modifications
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>
                            </div>

                            <!-- BOTTOM SECTION - Equipment/Inventory -->
                            <div class="character-sheet-footer">
                                <h3 class="section-header">EQUIPMENT & INVENTORY</h3>
                                <div class="backpack-block" (click)="toggleBackpackDetails()">
                                    <div class="backpack-summary">
                                        <div class="backpack-category" *ngIf="getBackpackItems('Items').length > 0">
                                            <span class="category-name">Items:</span>
                                            <span class="category-count">{{ getBackpackItems('Items').length }}</span>
                                        </div>
                                        <div class="backpack-category" *ngIf="getBackpackItems('Components').length > 0">
                                            <span class="category-name">Components:</span>
                                            <span class="category-count">{{ getBackpackItems('Components').length }}</span>
                                        </div>
                                        <div class="backpack-category" *ngIf="getBackpackItems('Consumables').length > 0">
                                            <span class="category-name">Consumables:</span>
                                            <span class="category-count">{{ getBackpackItems('Consumables').length }}</span>
                                        </div>
                                        <div class="backpack-category" *ngIf="getBackpackItems('Data').length > 0">
                                            <span class="category-name">Data:</span>
                                            <span class="category-count">{{ getBackpackItems('Data').length }}</span>
                                        </div>
                                        <mat-icon>{{ showBackpackDetails ? 'expand_less' : 'expand_more' }}</mat-icon>
                                    </div>

                                    <div *ngIf="showBackpackDetails" class="backpack-details">
                                        <div *ngFor="let category of ['Items', 'Components', 'Consumables', 'Data']">
                                            <div *ngIf="getBackpackItems(category).length > 0" class="backpack-category-section">
                                                <h4>{{ category }}</h4>
                                                <div class="backpack-items">
                                                    <div *ngFor="let item of getBackpackItems(category)" class="backpack-item">
                                                        <span class="item-name">{{ item.Name_Localised || item.Name }}</span>
                                                        <span class="item-count" *ngIf="item.Count">x{{ item.Count }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="['mainship', 'fighter', 'buggy'].includes(getActiveMode())" class="context-content character-sheet">
                            <!-- TOP SECTION - Ship Identity -->
                            <div class="character-header">
                                <div class="character-name">
                                    <h2>{{ getShipName() }}</h2>
                                    <div class="character-subtitle">{{ getShipType() }} {{ getActiveMode() !== 'buggy' ? '(' + getShipIdent() + ')' : '' }}</div>
                                </div>
                                <div class="character-class">
                                    <div class="class-circle">
                                        <div class="circle-value">{{ getLandingPadSize() }}</div>
                                    </div>
                                    <div class="class-label">SIZE</div>
                                </div>
                            </div>

                            <!-- SHIP SHEET MAIN SECTION -->
                            <div class="character-sheet-body">
                                <!-- LEFT COLUMN - Core Stats -->
                                <div class="sheet-column attributes-column">
                                    <div class="ship-core-stats">
                                        <div class="ship-stat-item">
                                            <div class="stat-label">MASS</div>
                                            <div class="stat-value-large">{{ getShipMass().toFixed(1) }}</div>
                                            <div class="stat-suffix">TONS</div>
                                        </div>

                                        <div class="ship-stat-item">
                                            <div class="stat-label">JUMP RANGE</div>
                                            <div class="stat-value-large">{{ getJumpRange().toFixed(1) }}</div>
                                            <div class="stat-suffix">LY</div>
                                        </div>

                                        <!-- Nav route summary has been moved to the top location section -->
                                    </div>

                                    <!-- Remove the nav-details section from here -->
                                </div>

                                <!-- MIDDLE COLUMN - Defense Stats -->
                                <div class="sheet-column stats-column">
                                    <div class="ship-defense-stats">
                                        <div class="defense-stat-item">
                                            <div class="stat-label">HULL</div>
                                            <div class="stat-value-with-bar">
                                                <div class="stat-value">{{ getShipHealth() }}</div>
                                                <mat-progress-bar class="stat-bar" mode="determinate" [value]="getShipHealthPercentage()"></mat-progress-bar>
                                            </div>
                                        </div>

                                        <div class="defense-stat-item">
                                            <div class="stat-label">FUEL</div>
                                            <div class="stat-value-with-bar">
                                                <div class="stat-value">{{ getFuelAmount() }}/{{ getFuelCapacity() }}</div>
                                                <mat-progress-bar class="stat-bar" mode="determinate" [value]="getFuelPercentage()"></mat-progress-bar>
                                            </div>
                                        </div>

                                        <div class="defense-stat-item cargo-box" (click)="toggleCargoDetails()">
                                            <div class="stat-label">CARGO <mat-icon class="tiny-icon">{{ showCargoDetails ? 'expand_less' : 'expand_more' }}</mat-icon></div>
                                            <div class="stat-value-with-bar">
                                                <div class="stat-value">{{ getCargoAmount() }}/{{ getCargoCapacity() }}</div>
                                                <mat-progress-bar class="stat-bar" mode="determinate" [value]="getCargoPercentage()"></mat-progress-bar>
                                            </div>
                                        </div>

                                        <div class="defense-stat-item">
                                            <div class="stat-label">REBUY</div>
                                            <div class="stat-value-large cr">{{ getShipRebuy() | number }}</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- RIGHT COLUMN - Weapons/Hardpoints -->
                                <div class="sheet-column weapons-column">
                                    <h3 class="stat-header">ARMAMENTS</h3>
                                    <div class="hardpoints-list">
                                        <ng-container *ngFor="let module of getWeaponModules()">
                                            <div class="hardpoint-item">
                                                <div class="hardpoint-details weapon-display">
                                                    <span class="hardpoint-name">{{ formatModuleName(module.Item) }}</span>
                                                </div>
                                                <div class="hardpoint-engineering" *ngIf="module.Engineering">
                                                    <mat-icon class="engineering-icon" [matTooltip]="getEngineeringTooltip(module)">build</mat-icon>
                                                </div>
                                            </div>
                                        </ng-container>
                                        <div *ngIf="!getWeaponModules().length" class="empty-state">No weapons equipped</div>
                                    </div>

                                    <h3 class="stat-header">UTILITY</h3>
                                    <div class="utility-list">
                                        <ng-container *ngFor="let module of getUtilityModules()">
                                            <div class="utility-item">
                                                <div class="utility-details">
                                                    <span class="utility-name">{{ formatModuleName(module.Item) }}</span>
                                                </div>
                                                <div class="utility-engineering" *ngIf="module.Engineering">
                                                    <mat-icon class="engineering-icon" [matTooltip]="getEngineeringTooltip(module)">build</mat-icon>
                                                </div>
                                            </div>
                                        </ng-container>
                                        <div *ngIf="!getUtilityModules().length" class="empty-state">No utility modules equipped</div>
                                    </div>
                                </div>
                            </div>

                            <!-- SHIP CARGO DISPLAY -->
                            <div *ngIf="showCargoDetails" class="cargo-details">
                                <h3 class="section-header">CARGO MANIFEST</h3>
                                <div class="cargo-list">
                                    <div *ngFor="let item of getCargoItems()" class="cargo-item">
                                        <span class="cargo-item-name">{{ item.Name_Localised || item.Name }}</span>
                                        <span class="cargo-item-count">x{{ item.Count }}</span>
                                    </div>
                                    <div *ngIf="!hasCargoItems()" class="empty-state">Cargo hold empty</div>
                                </div>
                            </div>

                            <!-- BOTTOM SECTION - Core & Optional Modules -->
                            <div class="character-sheet-footer">
                                <div class="modules-section">
                                    <h3 class="section-header">CORE INTERNALS</h3>
                                    <div class="module-list core-modules">
                                        <ng-container *ngFor="let module of getCoreModules()">
                                            <div class="module-item">
                                                <div class="module-slot">{{ formatSlotName(module.Slot) }}</div>
                                                <div class="module-details">
                                                    <span class="module-name">{{ formatModuleName(module.Item) }}</span>
                                                    <span class="module-class" *ngIf="getModuleClassAndRating(module.Item).length > 0">
                                                        {{ getModuleClassAndRating(module.Item) }}
                                                    </span>
                                                </div>
                                                <div class="module-engineering" *ngIf="module.Engineering">
                                                    <mat-icon class="engineering-icon" [matTooltip]="getEngineeringTooltip(module)">build</mat-icon>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>

                                <div class="modules-section">
                                    <h3 class="section-header">OPTIONAL INTERNALS</h3>
                                    <div class="module-list optional-modules">
                                        <ng-container *ngFor="let module of getOptionalModules()">
                                            <div class="module-item">
                                                <div class="module-slot">{{ formatSlotName(module.Slot) }}</div>
                                                <div class="module-details">
                                                    <span class="module-name">{{ formatModuleName(module.Item) }}</span>
                                                    <span class="module-class" *ngIf="getModuleClassAndRating(module.Item).length > 0">
                                                        {{ getModuleClassAndRating(module.Item) }}
                                                    </span>
                                                </div>
                                                <div class="module-engineering" *ngIf="module.Engineering">
                                                    <mat-icon class="engineering-icon" [matTooltip]="getEngineeringTooltip(module)">build</mat-icon>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>

                                    <div *ngIf="getShipModules().length > getVisibleModulesCount() && !showAllModules"
                                         class="show-more" (click)="toggleAllModules()">
                                        Show All Modules ({{ getShipModules().length }})
                                    </div>

                                    <div *ngIf="showAllModules" class="show-less" (click)="toggleAllModules()">
                                        Show Less
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ExobiologyScan (if active) -->
                        <mat-card *ngIf="hasActiveBioScan()">
                            <mat-card-header>
                                <mat-card-title>Exobiology Scan</mat-card-title>
                            </mat-card-header>
                            <mat-card-content>
                                <div class="scan-progress">
                                    <div class="scan-header">
                                        <h4>Scan Progress</h4>
                                        <div class="scan-status-indicator"
                                            [class.scan-too-close]="!isWithinScanRadius()"
                                            [class.scan-good-distance]="isWithinScanRadius()">
                                            {{ isWithinScanRadius() ? 'Good sampling distance' : 'Too close to previous sample' }}
                                        </div>
                                    </div>

                                    <div class="scan-summary">
                                        <span class="detail-label">Samples:</span>
                                        <span class="detail-value">{{ getBioScanCount() }}/3</span>
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>

                        <!-- Expandable panels -->
                        <div *ngIf="showFriendsPanel" class="expandable-panel friends-panel">
                            <h3>Friends Online</h3>
                            <mat-list>
                                <mat-list-item *ngFor="let friend of getOnlineFriends()" class="friend-item">
                                    <mat-icon>person</mat-icon>
                                    <span class="friend-name">CMDR {{ friend }}</span>
                                </mat-list-item>
                            </mat-list>
                            <div *ngIf="!getOnlineFriends().length" class="empty-message">
                                No friends currently online
                            </div>
                        </div>

                        <div *ngIf="showColonisationPanel" class="expandable-panel colonisation-panel">
                            <h3>Colony Construction</h3>
                            <div class="colony-header">
                                <h4>{{ getColonisationSystem() }}</h4>
                                <div class="colony-status" [ngClass]="getColonisationStatusClass()">
                                    {{ getColonisationStatusText() }}
                                </div>
                            </div>

                            <div class="progress-container">
                                <h4>Construction Progress</h4>
                                <div class="stat-bar">
                                    <mat-progress-bar
                                        mode="determinate"
                                        [value]="getColonisationProgressValue()"
                                    ></mat-progress-bar>
                                    <span>{{ formatPercentage(getColonisationProgress()) }}</span>
                                </div>
                            </div>

                            <div *ngIf="getColonisationResources().length > 0" class="resources-needed">
                                <h4>Resources Needed</h4>
                                <mat-list>
                                    <mat-list-item *ngFor="let resource of getColonisationResources()" class="resource-item">
                                        <div class="resource-details">
                                            <span class="resource-name">{{ resource.Name_Localised || resource.Name }}</span>
                                            <div class="resource-progress">
                                                <mat-progress-bar
                                                    mode="determinate"
                                                    [value]="(resource.ProvidedAmount / resource.RequiredAmount) * 100"
                                                ></mat-progress-bar>
                                                <span class="resource-count">
                                                    {{ resource.ProvidedAmount }}/{{ resource.RequiredAmount }}
                                                </span>
                                            </div>
                                        </div>
                                    </mat-list-item>
                                </mat-list>
                            </div>
                        </div>
                    </div>

                    <!-- Commander Tab Content -->
                    <div *ngIf="selectedTab === COMMANDER_TAB" class="tab-pane">
                        <h2>Commander Profile</h2>
                        <div class="commander-info">
                            <!-- Basic Commander Info Card -->
                            <mat-card>
                                <mat-card-header>
                                    <mat-card-title>CMDR {{ getCommanderName() }}</mat-card-title>
                                    <mat-card-subtitle *ngIf="getProjection('Commander')?.FID">ID: {{ getProjection('Commander')?.FID }}</mat-card-subtitle>
                                </mat-card-header>
                                <mat-card-content>
                                    <div class="commander-basic">
                                        <div *ngIf="getBalance()">
                                            <span class="detail-label">Credits:</span>
                                            <span class="detail-value">{{ formatNumber(getBalance()) }}</span>
                                        </div>
                                        <div *ngIf="getActiveMode()">
                                            <span class="detail-label">Active Mode:</span>
                                            <span class="detail-value">{{ getActiveMode() }}</span>
                                        </div>
                                    </div>
                                </mat-card-content>
                            </mat-card>

                            <!-- Ranks & Progress Card -->
                            <mat-card>
                                <mat-card-header>
                                    <mat-card-title>Ranks & Progress</mat-card-title>
                                </mat-card-header>
                                <mat-card-content>
                                    <div class="ranks-container">
                                        <!-- Combat rank -->
                                        <div class="rank-item">
                                            <span class="rank-name">Combat</span>
                                            <div class="rank-value">{{ getRank('Combat') }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getRankProgress('Combat')"
                                                matTooltip="Progress: {{getProjection('Progress')?.Combat}}%"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Trade rank -->
                                        <div class="rank-item">
                                            <span class="rank-name">Trade</span>
                                            <div class="rank-value">{{ getRank('Trade') }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getRankProgress('Trade')"
                                                matTooltip="Progress: {{getProjection('Progress')?.Trade}}%"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Explore rank -->
                                        <div class="rank-item">
                                            <span class="rank-name">Explore</span>
                                            <div class="rank-value">{{ getRank('Explore') }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getRankProgress('Explore')"
                                                matTooltip="Progress: {{getProjection('Progress')?.Explore}}%"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Soldier rank (Odyssey) -->
                                        <div class="rank-item">
                                            <span class="rank-name">Soldier</span>
                                            <div class="rank-value">{{ getRank('Soldier') }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getRankProgress('Soldier')"
                                                matTooltip="Progress: {{getProjection('Progress')?.Soldier}}%"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Exobiologist rank (Odyssey) -->
                                        <div class="rank-item">
                                            <span class="rank-name">Exobiologist</span>
                                            <div class="rank-value">{{ getRank('Exobiologist') }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getRankProgress('Exobiologist')"
                                                matTooltip="Progress: {{getProjection('Progress')?.Exobiologist}}%"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- CQC rank -->
                                        <div class="rank-item">
                                            <span class="rank-name">CQC</span>
                                            <div class="rank-value">{{ getRank('CQC') }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getRankProgress('CQC')"
                                                matTooltip="Progress: {{getProjection('Progress')?.CQC}}%"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Federation rank -->
                                        <div class="rank-item">
                                            <span class="rank-name">Federation</span>
                                            <div class="rank-value">{{ getRank('Federation') }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getRankProgress('Federation')"
                                                matTooltip="Progress: {{getProjection('Progress')?.Federation}}%"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Empire rank -->
                                        <div class="rank-item">
                                            <span class="rank-name">Empire</span>
                                            <div class="rank-value">{{ getRank('Empire') }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getRankProgress('Empire')"
                                                matTooltip="Progress: {{getProjection('Progress')?.Empire}}%"
                                            ></mat-progress-bar>
                                        </div>
                                    </div>
                                </mat-card-content>
                            </mat-card>

                            <!-- Reputation Card -->
                            <mat-card>
                                <mat-card-header>
                                    <mat-card-title>Reputation</mat-card-title>
                                </mat-card-header>
                                <mat-card-content>
                                    <div class="ranks-container">
                                        <!-- Federation reputation -->
                                        <div class="rank-item">
                                            <span class="rank-name">Federation</span>
                                            <div class="rank-value">{{ formatPercentage(getProjection('Reputation')?.Federation) }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getProjection('Reputation')?.Federation || 0"
                                                matTooltip="Reputation: {{formatPercentage(getProjection('Reputation')?.Federation)}}"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Empire reputation -->
                                        <div class="rank-item">
                                            <span class="rank-name">Empire</span>
                                            <div class="rank-value">{{ formatPercentage(getProjection('Reputation')?.Empire) }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getProjection('Reputation')?.Empire || 0"
                                                matTooltip="Reputation: {{formatPercentage(getProjection('Reputation')?.Empire)}}"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Alliance reputation -->
                                        <div class="rank-item">
                                            <span class="rank-name">Alliance</span>
                                            <div class="rank-value">{{ formatPercentage(getProjection('Reputation')?.Alliance) }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getProjection('Reputation')?.Alliance || 0"
                                                matTooltip="Reputation: {{formatPercentage(getProjection('Reputation')?.Alliance)}}"
                                            ></mat-progress-bar>
                                        </div>
                                        <!-- Independent reputation -->
                                        <div class="rank-item">
                                            <span class="rank-name">Independent</span>
                                            <div class="rank-value">{{ formatPercentage(getProjection('Reputation')?.Independent) }}</div>
                                            <mat-progress-bar
                                                mode="determinate"
                                                [value]="getProjection('Reputation')?.Independent || 0"
                                                matTooltip="Reputation: {{formatPercentage(getProjection('Reputation')?.Independent)}}"
                                            ></mat-progress-bar>
                                        </div>
                                    </div>
                                </mat-card-content>
                            </mat-card>

                            <!-- Statistics Overview Card -->
                            <mat-card *ngIf="getProjection('Statistics')">
                                <mat-card-header>
                                    <mat-card-title>Commander Statistics</mat-card-title>
                                </mat-card-header>
                                <mat-card-content>
                                    <mat-tab-group>
                                        <!-- Bank Account -->
                                        <mat-tab label="Banking">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Bank_Account">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Current Wealth:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Bank_Account?.Current_Wealth) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Spent on Ships:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Bank_Account?.Spent_On_Ships) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Spent on Outfitting:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Bank_Account?.Spent_On_Outfitting) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Insurance Claims:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Bank_Account?.Insurance_Claims }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Spent on Insurance:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Bank_Account?.Spent_On_Insurance) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Owned Ships:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Bank_Account?.Owned_Ship_Count }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- Combat Stats -->
                                        <mat-tab label="Combat">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Combat">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Bounties Claimed:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.Bounties_Claimed }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Bounty Hunting Profit:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Combat?.Bounty_Hunting_Profit) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Combat Bonds:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.Combat_Bonds }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Combat Bond Profits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Combat?.Combat_Bond_Profits) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Assassinations:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.Assassinations }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Assassination Profits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Combat?.Assassination_Profits) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Highest Single Reward:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Combat?.Highest_Single_Reward) }}</span>
                                                    </div>

                                                    <h4>Conflict Zones</h4>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Total Battles:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.ConflictZone_Total }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Total Victories:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.ConflictZone_Total_Wins }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">High Intensity:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.ConflictZone_High }} ({{ getProjection('Statistics')?.Combat?.ConflictZone_High_Wins }} wins)</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Medium Intensity:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.ConflictZone_Medium }} ({{ getProjection('Statistics')?.Combat?.ConflictZone_Medium_Wins }} wins)</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Low Intensity:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.ConflictZone_Low }} ({{ getProjection('Statistics')?.Combat?.ConflictZone_Low_Wins }} wins)</span>
                                                    </div>

                                                    <h4>On-Foot Combat</h4>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Combat Bonds:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.OnFoot_Combat_Bonds }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Combat Bond Profits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Combat?.OnFoot_Combat_Bonds_Profits) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Settlements Defended:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.Settlement_Defended }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Settlements Conquered:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.Settlement_Conquered }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Skimmers Killed:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.OnFoot_Skimmers_Killed }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Scavengers Killed:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Combat?.OnFoot_Scavs_Killed }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- Exploration Stats -->
                                        <mat-tab label="Exploration">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Exploration">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Systems Visited:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.Systems_Visited }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Exploration Profits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Exploration?.Exploration_Profits) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Highest Payout:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Exploration?.Highest_Payout) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Planets Scanned (FSS):</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.Planets_Scanned_To_Level_2 }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Planets Scanned (DSS):</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.Planets_Scanned_To_Level_3 }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Efficient Scans:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.Efficient_Scans }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Total Jumps:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.Total_Hyperspace_Jumps }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Total Distance:</span>
                                                        <span class="stats-value">{{ formatDistance(getProjection('Statistics')?.Exploration?.Total_Hyperspace_Distance) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Greatest Distance From Start:</span>
                                                        <span class="stats-value">{{ formatDistance(getProjection('Statistics')?.Exploration?.Greatest_Distance_From_Start) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Time Played:</span>
                                                        <span class="stats-value">{{ getHoursFromSeconds(getProjection('Statistics')?.Exploration?.Time_Played) }} hours</span>
                                                    </div>

                                                    <h4>On-Foot Exploration</h4>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Distance Travelled:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Exploration?.OnFoot_Distance_Travelled) }} m</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Planet Footfalls:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.Planet_Footfalls }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">First Footfalls:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.First_Footfalls }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Settlements Visited:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.Settlements_Visited }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Shuttle Journeys:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exploration?.Shuttle_Journeys }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Shuttle Distance:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Exploration?.Shuttle_Distance_Travelled) }} ls</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Spent on Shuttles:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Exploration?.Spent_On_Shuttles) }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- Trading Stats -->
                                        <mat-tab label="Trading">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Trading">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Markets Traded With:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Trading?.Markets_Traded_With }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Market Profits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Trading?.Market_Profits) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Resources Traded:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Trading?.Resources_Traded }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Average Profit:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Trading?.Average_Profit) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Highest Transaction:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Trading?.Highest_Single_Transaction) }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- Odyssey Stats -->
                                        <mat-tab label="Odyssey">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Bank_Account">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Suits Owned:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Bank_Account?.Suits_Owned }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Weapons Owned:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Bank_Account?.Weapons_Owned }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Spent on Suits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Bank_Account?.Spent_On_Suits) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Spent on Weapons:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Bank_Account?.Spent_On_Weapons) }}</span>
                                                    </div>
                                                </div>
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Exobiology">
                                                    <h4>Exobiology</h4>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Organic Species:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Exobiology?.Organic_Species_Encountered }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Profits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Exobiology?.Organic_Data_Profits) }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- Mining Stats -->
                                        <mat-tab label="Mining">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Mining">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Mining Profits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Mining?.Mining_Profits) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Quantity Mined:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Mining?.Quantity_Mined }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Materials Collected:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Mining?.Materials_Collected }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- Crime Stats -->
                                        <mat-tab label="Crime">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Crime">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Notoriety:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crime?.Notoriety }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Fines:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crime?.Fines }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Total Fines:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Crime?.Total_Fines) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Bounties Received:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crime?.Bounties_Received }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Total Bounties:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Crime?.Total_Bounties) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Highest Bounty:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Crime?.Highest_Bounty) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Total Murders:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crime?.Total_Murders }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- Engineering Stats -->
                                        <mat-tab label="Engineering">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Crafting">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Engineers Used:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crafting?.Count_Of_Used_Engineers }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Recipes Generated:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crafting?.Recipes_Generated }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Grade 1 Recipes:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crafting?.Recipes_Generated_Rank_1 }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Grade 2 Recipes:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crafting?.Recipes_Generated_Rank_2 }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Grade 3 Recipes:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crafting?.Recipes_Generated_Rank_3 }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Grade 4 Recipes:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crafting?.Recipes_Generated_Rank_4 }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Grade 5 Recipes:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Crafting?.Recipes_Generated_Rank_5 }}</span>
                                                    </div>
                                                </div>
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Material_Trader_Stats">
                                                    <h4>Material Trading</h4>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Trades Completed:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Material_Trader_Stats?.Trades_Completed }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Materials Traded:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Material_Trader_Stats?.Materials_Traded }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- Smuggling Stats -->
                                        <mat-tab label="Smuggling">
                                            <div class="stats-container">
                                                <div class="stats-item" *ngIf="getProjection('Statistics')?.Smuggling">
                                                    <div class="stats-row">
                                                        <span class="stats-label">Black Markets Traded With:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Smuggling?.Black_Markets_Traded_With }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Black Markets Profits:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Smuggling?.Black_Markets_Profits) }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Resources Smuggled:</span>
                                                        <span class="stats-value">{{ getProjection('Statistics')?.Smuggling?.Resources_Smuggled }}</span>
                                                    </div>
                                                    <div class="stats-row">
                                                        <span class="stats-label">Highest Transaction:</span>
                                                        <span class="stats-value">{{ formatNumber(getProjection('Statistics')?.Smuggling?.Highest_Single_Transaction) }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </mat-tab>

                                        <!-- More Stats Tabs as needed -->
                                    </mat-tab-group>
                                </mat-card-content>
                            </mat-card>

                            <!-- Squadron Information Card (if available) -->
                            <mat-card *ngIf="getProjection('SquadronStartup')">
                                <mat-card-header>
                                    <mat-card-title>Squadron</mat-card-title>
                                </mat-card-header>
                                <mat-card-content>
                                    <div class="squadron-container">
                                        <div class="stats-row">
                                            <span class="stats-label">Squadron:</span>
                                            <span class="stats-value">{{ getProjection('SquadronStartup')?.SquadronName }}</span>
                                        </div>
                                        <div class="stats-row" *ngIf="getProjection('SquadronStartup')?.CurrentRank">
                                            <span class="stats-label">Rank:</span>
                                            <span class="stats-value">{{ getProjection('SquadronStartup')?.CurrentRank }}</span>
                                        </div>
                                        <!-- Add more squadron info as needed -->
                                    </div>
                                </mat-card-content>
                            </mat-card>

                            <!-- Powerplay Information Card (if available) -->
                            <mat-card *ngIf="getProjection('Powerplay')">
                                <mat-card-header>
                                    <mat-card-title>Powerplay</mat-card-title>
                                </mat-card-header>
                                <mat-card-content>
                                    <div class="powerplay-container">
                                        <div class="stats-row">
                                            <span class="stats-label">Power:</span>
                                            <span class="stats-value">{{ getProjection('Powerplay')?.Power }}</span>
                                        </div>
                                        <div class="stats-row" *ngIf="getProjection('Powerplay')?.Rank !== undefined">
                                            <span class="stats-label">Rank:</span>
                                            <span class="stats-value">{{ getProjection('Powerplay')?.Rank }}</span>
                                        </div>
                                        <div class="stats-row" *ngIf="getProjection('Powerplay')?.Merits !== undefined">
                                            <span class="stats-label">Merits:</span>
                                            <span class="stats-value">{{ getProjection('Powerplay')?.Merits }}</span>
                                        </div>
                                        <div class="stats-row" *ngIf="getProjection('Powerplay')?.Votes !== undefined">
                                            <span class="stats-label">Votes:</span>
                                            <span class="stats-value">{{ getProjection('Powerplay')?.Votes }}</span>
                                        </div>
                                        <!-- Add more powerplay info as needed -->
                                    </div>
                                </mat-card-content>
                            </mat-card>
                        </div>
                    </div>

                    <!-- Station Tab Content -->
                    <div *ngIf="selectedTab === STATION_TAB" class="tab-pane">
                        <h2>Station Services</h2>
                        <mat-card>
                            <mat-card-header>
                                <mat-card-title>{{ getStationName() }}</mat-card-title>
                                <mat-card-subtitle *ngIf="getProjection('Market')?.StarSystem">
                                    {{ getProjection('Market')?.StarSystem }}
                                </mat-card-subtitle>
                            </mat-card-header>
                            <mat-card-content>
                                <!-- Station services buttons -->
                                <div class="station-services">
                                    <button mat-button [class.active]="selectedStationService === 'market'" (click)="showStationService('market')">
                                        <mat-icon>shopping_cart</mat-icon>
                                        Market
                                    </button>
                                    <button mat-button [class.active]="selectedStationService === 'outfitting'" (click)="showStationService('outfitting')">
                                        <mat-icon>build</mat-icon>
                                        Outfitting
                                    </button>
                                    <button mat-button [class.active]="selectedStationService === 'shipyard'" (click)="showStationService('shipyard')">
                                        <mat-icon>directions_boat</mat-icon>
                                        Shipyard
                                    </button>
                                </div>

                                <!-- Market data -->
                                <div *ngIf="selectedStationService === 'market'" class="station-service-display">
                                    <h3>Commodity Market</h3>
                                    <div class="market-list" *ngIf="getProjection('Market')?.Items?.length; else noMarketData">
                                        <div class="search-box">
                                            <mat-icon>search</mat-icon>
                                            <input type="text" [(ngModel)]="marketSearchTerm" placeholder="Search commodities...">
                                        </div>
                                        <table class="market-table">
                                            <thead>
                                                <tr>
                                                    <th>Commodity</th>
                                                    <th>Category</th>
                                                    <th>Buy Price</th>
                                                    <th>Sell Price</th>
                                                    <th>Demand</th>
                                                    <th>Stock</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of getFilteredMarketItems()">
                                                    <td>{{ formatItemName(item.Name_Localised || item.Name) }}</td>
                                                    <td>{{ item.Category_Localised || item.Category }}</td>
                                                    <td>{{ item.BuyPrice > 0 ? (item.BuyPrice | number) + ' Cr' : '-' }}</td>
                                                    <td>{{ item.SellPrice > 0 ? (item.SellPrice | number) + ' Cr' : '-' }}</td>
                                                    <td>{{ item.Demand || 0 }}</td>
                                                    <td>{{ item.Stock || 0 }}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <ng-template #noMarketData>
                                        <div class="no-data-message">
                                            No market data available. Visit the station's commodity market to update.
                                        </div>
                                    </ng-template>
                                </div>

                                <!-- Outfitting data -->
                                <div *ngIf="selectedStationService === 'outfitting'" class="station-service-display">
                                    <h3>Ship Outfitting</h3>
                                    <div class="outfitting-list" *ngIf="getProjection('Outfitting')?.Items?.length; else noOutfittingData">
                                        <div class="search-box">
                                            <mat-icon>search</mat-icon>
                                            <input type="text" [(ngModel)]="outfittingSearchTerm" placeholder="Search modules...">
                                        </div>
                                        <table class="outfitting-table">
                                            <thead>
                                                <tr>
                                                    <th>Module</th>
                                                    <th>Price</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of getFilteredOutfittingItems()">
                                                    <td>{{ formatModuleName(item.Name) }}</td>
                                                    <td>{{ (item.BuyPrice | number) + ' Cr' }}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <ng-template #noOutfittingData>
                                        <div class="no-data-message">
                                            No outfitting data available. Visit the station's outfitting service to update.
                                        </div>
                                    </ng-template>
                                </div>

                                <!-- Shipyard data -->
                                <div *ngIf="selectedStationService === 'shipyard'" class="station-service-display">
                                    <h3>Ship Dealer</h3>
                                    <div class="shipyard-list" *ngIf="getProjection('Shipyard')?.PriceList?.length; else noShipyardData">
                                        <div class="search-box">
                                            <mat-icon>search</mat-icon>
                                            <input type="text" [(ngModel)]="shipyardSearchTerm" placeholder="Search ships...">
                                        </div>
                                        <table class="shipyard-table">
                                            <thead>
                                                <tr>
                                                    <th>Ship</th>
                                                    <th>Price</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let ship of getFilteredShipyardItems()">
                                                    <td>{{ ship.ShipType_Localised || ship.ShipType }}</td>
                                                    <td>{{ (ship.ShipPrice | number) + ' Cr' }}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <ng-template #noShipyardData>
                                        <div class="no-data-message">
                                            No shipyard data available. Visit the station's ship dealer to update.
                                        </div>
                                    </ng-template>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>

                    <!-- Storage Tab Content -->
                    <div *ngIf="selectedTab === STORAGE_TAB" class="tab-pane">
                        <h2>Storage & Materials</h2>

                        <!-- Materials Card -->
                        <mat-card>
                            <mat-card-header>
                                <mat-card-title>Materials</mat-card-title>
                            </mat-card-header>
                            <mat-card-content>
                                <div class="materials-container">
                                    <mat-tab-group>
                                        <!-- Raw Materials -->
                                        <mat-tab label="Raw">
                                            <div class="materials-table">
                                                <table class="material-table">
                                                    <thead>
                                                        <tr>
                                                            <th>Category</th>
                                                            <th>Grade 1</th>
                                                            <th>Grade 2</th>
                                                            <th>Grade 3</th>
                                                            <th>Grade 4</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let category of [1, 2, 3, 4, 5, 6, 7]">
                                                            <td>{{ getRawMaterialCategoryName(category) }}</td>
                                                            <td *ngFor="let grade of [1, 2, 3, 4]">
                                                                <ng-container *ngIf="getRawMaterialByGradeAndCategory(grade, category).length > 0; else emptyMaterial">
                                                                    <div class="material-cell" *ngFor="let material of getRawMaterialByGradeAndCategory(grade, category)">
                                                                        <span class="material-name">{{ formatMaterialName(material.Name_Localised || material.Name) }}</span>
                                                                        <span class="material-count">{{ material.Count }}</span>
                                                                    </div>
                                                                </ng-container>
                                                                <ng-template #emptyMaterial>
                                                                    <div class="material-cell empty">
                                                                        <span class="material-name">{{ getEmptyRawMaterialName(grade, category) }}</span>
                                                                        <span class="material-count">0</span>
                                                                    </div>
                                                                </ng-template>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </mat-tab>

                                        <!-- Manufactured Materials -->
                                        <mat-tab label="Manufactured">
                                            <div class="materials-table">
                                                <table class="material-table">
                                                    <thead>
                                                        <tr>
                                                            <th>Category</th>
                                                            <th>Grade 1</th>
                                                            <th>Grade 2</th>
                                                            <th>Grade 3</th>
                                                            <th>Grade 4</th>
                                                            <th>Grade 5</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let section of getManufacturedSections()">
                                                            <td>{{ section }}</td>
                                                            <td *ngFor="let grade of [1, 2, 3, 4, 5]">
                                                                <ng-container *ngIf="getManufacturedMaterialByGradeAndSection(section, grade).length > 0; else emptyManufactured">
                                                                    <div class="material-cell" *ngFor="let material of getManufacturedMaterialByGradeAndSection(section, grade)">
                                                                        <span class="material-name">{{ formatMaterialName(material.Name_Localised || material.Name) }}</span>
                                                                        <span class="material-count">{{ material.Count }}</span>
                                                                    </div>
                                                                </ng-container>
                                                                <ng-template #emptyManufactured>
                                                                    <div class="material-cell empty">
                                                                        <span class="material-name">{{ getEmptyManufacturedMaterialName(section, grade) }}</span>
                                                                        <span class="material-count">0</span>
                                                                    </div>
                                                                </ng-template>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </mat-tab>

                                        <!-- Encoded Materials -->
                                        <mat-tab label="Encoded">
                                            <div class="materials-table">
                                                <table class="material-table">
                                                    <thead>
                                                        <tr>
                                                            <th>Category</th>
                                                            <th>Grade 1</th>
                                                            <th>Grade 2</th>
                                                            <th>Grade 3</th>
                                                            <th>Grade 4</th>
                                                            <th>Grade 5</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let section of getEncodedSections()">
                                                            <td>{{ section }}</td>
                                                            <td *ngFor="let grade of [1, 2, 3, 4, 5]">
                                                                <ng-container *ngIf="getEncodedMaterialByGradeAndSection(section, grade).length > 0; else emptyEncoded">
                                                                    <div class="material-cell" *ngFor="let material of getEncodedMaterialByGradeAndSection(section, grade)">
                                                                        <span class="material-name">{{ formatMaterialName(material.Name_Localised || material.Name) }}</span>
                                                                        <span class="material-count">{{ material.Count }}</span>
                                                                    </div>
                                                                </ng-container>
                                                                <ng-template #emptyEncoded>
                                                                    <div class="material-cell empty">
                                                                        <span class="material-name">{{ getEmptyEncodedMaterialName(section, grade) }}</span>
                                                                        <span class="material-count">0</span>
                                                                    </div>
                                                                </ng-template>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </mat-tab>
                                    </mat-tab-group>
                                </div>
                            </mat-card-content>
                        </mat-card>

                        <!-- Stored Ships Card -->
                        <mat-card>
                            <mat-card-header>
                                <mat-card-title>Stored Ships</mat-card-title>
                                <mat-card-subtitle *ngIf="getProjection('StoredShips')?.StationName">
                                    {{ getProjection('StoredShips')?.StationName }}, {{ getProjection('StoredShips')?.StarSystem }}
                                </mat-card-subtitle>
                            </mat-card-header>
                            <mat-card-content>
                                <mat-tab-group>
                                    <!-- Ships at Current Location -->
                                    <mat-tab label="Ships Here">
                                        <div class="ships-list" *ngIf="getProjection('StoredShips')?.ShipsHere?.length">
                                            <div class="ship-item" *ngFor="let ship of getProjection('StoredShips')?.ShipsHere">
                                                <div class="ship-icon">
                                                    <mat-icon>directions_boat</mat-icon>
                                                </div>
                                                <div class="ship-details">
                                                    <div class="ship-name">{{ ship.Name || ship.ShipType_Localised || ship.ShipType }}</div>
                                                    <div class="ship-type" *ngIf="ship.Name">{{ ship.ShipType_Localised || ship.ShipType }}</div>
                                                    <div class="ship-value">{{ formatNumber(ship.Value) }} Cr</div>
                                                    <div class="ship-hot" *ngIf="ship.Hot">HOT</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="no-ships" *ngIf="!getProjection('StoredShips')?.ShipsHere?.length">
                                            No ships stored at this location.
                                        </div>
                                    </mat-tab>

                                    <!-- Remote Ships -->
                                    <mat-tab label="Remote Ships">
                                        <div class="ships-list" *ngIf="getProjection('StoredShips')?.ShipsRemote?.length">
                                            <div class="ship-item" *ngFor="let ship of getProjection('StoredShips')?.ShipsRemote">
                                                <div class="ship-icon">
                                                    <mat-icon>directions_boat</mat-icon>
                                                </div>
                                                <div class="ship-details">
                                                    <div class="ship-name">{{ ship.Name || ship.ShipType_Localised || ship.ShipType }}</div>
                                                    <div class="ship-type" *ngIf="ship.Name">{{ ship.ShipType_Localised || ship.ShipType }}</div>
                                                    <div class="ship-location">{{ ship.StarSystem }}</div>
                                                    <div class="ship-value">{{ formatNumber(ship.Value) }} Cr</div>
                                                    <div class="ship-transfer">
                                                        <div>Transfer: {{ formatNumber(ship.TransferPrice) }} Cr</div>
                                                        <div>Time: {{ formatTransferTime(ship.TransferTime) }}</div>
                                                    </div>
                                                    <div class="ship-hot" *ngIf="ship.Hot">HOT</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="no-ships" *ngIf="!getProjection('StoredShips')?.ShipsRemote?.length">
                                            No ships stored remotely.
                                        </div>
                                    </mat-tab>
                                </mat-tab-group>
                            </mat-card-content>
                        </mat-card>

                        <!-- Ship Locker Card -->
                        <mat-card>
                            <mat-card-header>
                                <mat-card-title>Ship Locker</mat-card-title>
                            </mat-card-header>
                            <mat-card-content>
                                <div class="locker-container">
                                    <mat-tab-group>
                                        <!-- General Items -->
                                        <mat-tab label="Items">
                                            <div class="items-grid" *ngIf="getProjection('ShipLocker')?.Items?.length">
                                                <div class="locker-item" *ngFor="let item of getProjection('ShipLocker')?.Items">
                                                    <div class="item-count">{{ item.Count }}</div>
                                                    <div class="item-name">
                                                        {{ formatItemName(item.Name_Localised || item.Name) }}
                                                        <span class="mission-tag" *ngIf="item.MissionID">[Mission]</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="no-items" *ngIf="!getProjection('ShipLocker')?.Items?.length">
                                                No items stored.
                                            </div>
                                        </mat-tab>

                                        <!-- Components -->
                                        <mat-tab label="Components">
                                            <div class="items-grid" *ngIf="getProjection('ShipLocker')?.Components?.length">
                                                <div class="locker-item" *ngFor="let item of getProjection('ShipLocker')?.Components">
                                                    <div class="item-count">{{ item.Count }}</div>
                                                    <div class="item-name">{{ formatItemName(item.Name_Localised || item.Name) }}</div>
                                                </div>
                                            </div>
                                            <div class="no-items" *ngIf="!getProjection('ShipLocker')?.Components?.length">
                                                No components stored.
                                            </div>
                                        </mat-tab>

                                        <!-- Consumables -->
                                        <mat-tab label="Consumables">
                                            <div class="items-grid" *ngIf="getProjection('ShipLocker')?.Consumables?.length">
                                                <div class="locker-item" *ngFor="let item of getProjection('ShipLocker')?.Consumables">
                                                    <div class="item-count">{{ item.Count }}</div>
                                                    <div class="item-name">{{ formatItemName(item.Name_Localised || item.Name) }}</div>
                                                </div>
                                            </div>
                                            <div class="no-items" *ngIf="!getProjection('ShipLocker')?.Consumables?.length">
                                                No consumables stored.
                                            </div>
                                        </mat-tab>

                                        <!-- Data -->
                                        <mat-tab label="Data">
                                            <div class="items-grid" *ngIf="getProjection('ShipLocker')?.Data?.length">
                                                <div class="locker-item" *ngFor="let item of getProjection('ShipLocker')?.Data">
                                                    <div class="item-count">{{ item.Count }}</div>
                                                    <div class="item-name">
                                                        {{ formatItemName(item.Name_Localised || item.Name) }}
                                                        <span class="owner-tag" *ngIf="item.OwnerID && item.OwnerID !== 0">[External]</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="no-items" *ngIf="!getProjection('ShipLocker')?.Data?.length">
                                                No data stored.
                                            </div>
                                        </mat-tab>
                                    </mat-tab-group>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>
            </div>

            <div class="no-data" *ngIf="!isProjectionsLoaded">
                Waiting for status data...
            </div>
        </div>